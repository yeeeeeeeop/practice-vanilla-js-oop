var u=Object.defineProperty;var f=(i,t,e)=>t in i?u(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var c=(i,t,e)=>(f(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();class E{constructor(t,e=!1){t?this.hostElement=document.getElementById(t):this.hostElement=document.body,this.insertBefore=e}detach(){this.element&&this.element.remove()}attach(){this.hostElement.insertAdjacentElement(this.insertBefore?"afterbegin":"beforeend",this.element)}}class y extends E{constructor(e,s,o){super(o);c(this,"closeTooltip",()=>{this.detach(),this.closeNotifier()});this.closeNotifier=e,this.text=s,this.create()}create(){const e=document.createElement("div");e.className="card";const s=document.getElementById("tooltip"),o=document.importNode(s.content,!0);o.querySelector("p").textContent=this.text,e.append(o);const n=this.hostElement.offsetLeft,r=this.hostElement.offsetTop,d=this.hostElement.clientHeight,h=this.hostElement.parentElement.scrollTop,p=n+20,m=r+d-h-10;e.style.position="absolute",e.style.left=p+"px",e.style.top=m+"px",e.addEventListener("click",this.closeTooltip),this.element=e}}class a{static clearEventListeners(t){const e=t.cloneNode(!0);return t.replaceWith(e),e}static moveElement(t,e){const s=document.getElementById(t);document.querySelector(e).append(s),s.scrollIntoView({behavior:"smooth"})}}class g{constructor(t,e,s){c(this,"hasActiveTooltip",!1);this.id=t,this.updateProjectListsHandler=e,this.connectDrag(),this.connectMoreInfoButton(),this.connectSwitchButton(s)}showMoreInfoHandler(){if(this.hasActiveTooltip)return;const e=document.getElementById(this.id).dataset.extraInfo;new y(()=>{this.hasActiveTooltip=!1},e,this.id).attach(),this.hasActiveTooltip=!0}connectDrag(){const t=document.getElementById(this.id);t.addEventListener("dragstart",e=>{e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"}),t.addEventListener("dragend",e=>{console.log(e)})}connectMoreInfoButton(){document.getElementById(this.id).querySelector("button:first-of-type").addEventListener("click",this.showMoreInfoHandler.bind(this))}connectSwitchButton(t){let s=document.getElementById(this.id).querySelector("button:last-of-type");s=a.clearEventListeners(s),s.textContent=t==="active"?"Finish":"Activate",s.addEventListener("click",this.updateProjectListsHandler.bind(null,this.id))}update(t,e){this.updateProjectListsHandler=t,this.connectSwitchButton(e)}}class l{constructor(t){c(this,"projects",[]);this.type=t,document.querySelectorAll(`#${t}-projects li`).forEach(s=>{this.projects.push(new g(s.id,this.switchProject.bind(this),this.type))}),this.connectDroppable()}connectDroppable(){const t=document.querySelector(`#${this.type}-projects ul`);t.addEventListener("dragenter",e=>{e.dataTransfer.types[0]==="text/plain"&&(t.parentElement.classList.add("droppable"),e.preventDefault())}),t.addEventListener("dragover",e=>{e.dataTransfer.types[0]==="text/plain"&&e.preventDefault()}),t.addEventListener("dragleave",e=>{e.relatedTarget.closest(`#${this.type}-projects ul`)!==t&&t.parentElement.classList.remove("droppable")}),t.addEventListener("drop",e=>{const s=e.dataTransfer.getData("text/plain");this.projects.find(o=>o.id===s)||(document.getElementById(s).querySelector("button:last-of-type").click(),t.parentElement.classList.remove("droppable"))})}setSwitchHandlerFunction(t){this.switchHandler=t}addProject(t){this.projects.push(t),a.moveElement(t.id,`#${this.type}-projects ul`),t.update(this.switchProject.bind(this),this.type)}switchProject(t){this.switchHandler(this.projects.find(e=>e.id===t)),this.projects=this.projects.filter(e=>e.id!==t)}}globalThis.DEFAULT_VALUE="MAX";class j{static init(){const t=new l("active"),e=new l("finished");t.setSwitchHandlerFunction(e.addProject.bind(e)),e.setSwitchHandlerFunction(t.addProject.bind(t))}}j.init();
